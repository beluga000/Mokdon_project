<template>
  <q-layout class="page-container page-background">
    <!-- <section class="">
      <div class="q-pa-md q-gutter-sm">
        <q-btn no-caps push color="primary" label="List BottomSheet" @click="show()" />
        <q-btn no-caps push color="white" text-color="primary" label="Grid BottomSheet" @click="show(true)" />
      </div>
    </section> -->
    <q-page class="common-container">
      <section class="page-section">
        <div class="page-event">Ï†ÅÍ∏à ÏÉÅÌíà</div>
      </section>
      <section class="page-section">
        <article class="card-article">
          <div class="article-title">ÏùÄÌñâ</div>
          <q-tabs
            v-model="cardCompanyCode"
            inline-label
            class="bg-white tab-list"
          >
            <q-tab class="tab-item" @click="selectBank('KBÍµ≠ÎØºÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_KB_Profile.png"
                    alt="Íµ≠ÎØºÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>KBÍµ≠ÎØº</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Ïã†ÌïúÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_SHINHAN_Profile.png"
                    alt="Ïã†ÌïúÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Ïã†Ìïú</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('ÌïòÎÇòÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_SHINHAN_Profile.png"
                    alt="ÌïòÎÇòÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>ÌïòÎÇò</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Ïö∞Î¶¨ÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_WOORI_Profile.png"
                    alt="Ïö∞Î¶¨ÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Ïö∞Î¶¨</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('IBKÍ∏∞ÏóÖÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_IBK_Profile.png"
                    alt="Í∏∞ÏóÖÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>IBKÍ∏∞ÏóÖ</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('KDBÏÇ∞ÏóÖÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_KDB_Profile.png"
                    alt="ÏÇ∞ÏóÖÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>KDBÏÇ∞ÏóÖ</span>
                </div>
              </label>
            </q-tab>
            <!-- <q-tab class="tab-item" @click='selectBank("Ïã†Ìòë")'>
        <label>
        <div class="card-company-logo">
          <img src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_CU_Profile.png" alt="Ïã†Ìòë">
        </div>
        <div class="card-company-name">
      <span>Ïã†Ìòë</span>
    </div>
  </label>
      </q-tab> -->
            <q-tab class="tab-item" @click="selectBank('SCÏ†úÏùºÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_SC_Profile.png"
                    alt="Ï†úÏùºÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>SCÏ†úÏùº</span>
                </div>
              </label>
            </q-tab>
            <!-- <q-tab class="tab-item"  @click='selectBank("Ïã†Ìòë")'>
        <label>
        <div class="card-company-logo">
          <img src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_EPOST_Profile.png" alt="Ïö∞Ï≤¥Íµ≠ÏùÄÌñâ">
        </div>
        <div class="card-company-name">
      <span>Ïö∞Ï†ïÏÇ¨ÏóÖÎ≥∏Î∂Ä</span>
    </div>
  </label>
      </q-tab> -->
            <q-tab class="tab-item" @click="selectBank('Î∂ÄÏÇ∞ÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_BUSAN_Profile.png"
                    alt="Î∂ÄÏÇ∞ÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Î∂ÄÏÇ∞</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('SHÏàòÌòëÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_SH_Profile.png"
                    alt="ÏàòÌòëÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>SHÏàòÌòë</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Í≤ΩÎÇ®ÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_KYOUNGNAM_Profile.png"
                    alt="Í≤ΩÎÇ®ÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Í≤ΩÎÇ®</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_KAKAO_Profile.png"
                    alt="Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨"
                  />
                </div>
                <div class="card-company-name">
                  <span>Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Í¥ëÏ£ºÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_KWANGJU_Profile.png"
                    alt="Í¥ëÏ£ºÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Í¥ëÏ£º</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('ÌÜ†Ïä§Î±ÖÌÅ¨')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_TOSS_Profile.png"
                    alt="ÌÜ†Ïä§Î±ÖÌÅ¨"
                  />
                </div>
                <div class="card-company-name">
                  <span>ÌÜ†Ïä§Î±ÖÌÅ¨</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Ï†ÑÎ∂ÅÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_JEONBUK_Profile.png"
                    alt="Ï†ÑÎ∂ÅÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Ï†ÑÎ∂Å</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('ÏºÄÏù¥Î±ÖÌÅ¨')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_K_Profile.png"
                    alt="ÏºÄÏù¥Î±ÖÌÅ¨"
                  />
                </div>
                <div class="card-company-name">
                  <span>ÏºÄÏù¥Î±ÖÌÅ¨</span>
                </div>
              </label>
            </q-tab>
            <q-tab class="tab-item" @click="selectBank('Ï†úÏ£ºÏùÄÌñâ')">
              <label>
                <div class="card-company-logo">
                  <img
                    src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/BK_JEJU_Profile.png"
                    alt="Ï†úÏ£ºÏùÄÌñâ"
                  />
                </div>
                <div class="card-company-name">
                  <span>Ï†úÏ£º</span>
                </div>
              </label>
            </q-tab>
            <!-- <q-tab class="tab-item"  @click='selectBank("Ïã†Ìòë")'>
        <label>
        <div class="card-company-logo">
          <img src="https://financial.pstatic.net/pie/common-bi/1.4.0/images/SB_WOORIFIN_Profile.png" alt="Ïö∞Î¶¨Ï¢ÖÌï©Í∏àÏúµ">
        </div>
        <div class="card-company-name">
      <span>Ïö∞Î¶¨Ï¢ÖÌï©Í∏àÏúµ</span>
    </div>
  </label>
      </q-tab> -->
          </q-tabs>
        </article>
        <article class="card-article">
          <div class="article-title">Í∏∞Í∞Ñ</div>
          <div class="bar_wrapper">
            <div class="bar_itself">
              <div class="bar_cir"></div>
              <div class="bar_1" @click="select_period('6Í∞úÏõî')"></div>
              <div class="bar_2" @click="select_period('12Í∞úÏõî')"></div>
              <div class="bar_3" @click="select_period('24Í∞úÏõî Ïù¥ÏÉÅ')"></div>
            </div>
            <div class="txt_area">
              <div id="whole" @click="select_period('Ï†ÑÏ≤¥')">Ï†ÑÏ≤¥</div>
              <div id="month_6" @click="select_period('6Í∞úÏõî')">6Í∞úÏõî</div>
              <div id="month_12" @click="select_period('12Í∞úÏõî')">12Í∞úÏõî</div>
              <div id="month_24" @click="select_period('24Í∞úÏõî Ïù¥ÏÉÅ')">
                24Í∞úÏõî Ïù¥ÏÉÅ
              </div>
            </div>
          </div>
        </article>
        <article class="card-article">
          <div class="article-title">ÏÉÅÌíàÏú†Ìòï</div>
          <q-tabs inline-label class="bg-white tab-list">
            <q-tab
              name="ÌäπÌåê"
              label="ÌäπÌåê"
              @click="handleBenefitClick('specialOffer')"
            />
            <q-tab
              name="Î∞©Î¨∏ÏóÜÏù¥Í∞ÄÏûÖ"
              label="Î∞©Î¨∏ÏóÜÏù¥Í∞ÄÏûÖ"
              @click="handleBenefitClick('online')"
            />
            <q-tab
              name="Ï≤≠ÎÖÑÏ†ÅÍ∏à"
              label="Ï≤≠ÎÖÑÏ†ÅÍ∏à"
              @click="handleBenefitClick('savingForYouth')"
            />
            <q-tab
              name="Íµ∞Ïù∏Ï†ÅÍ∏à"
              label="Íµ∞Ïù∏Ï†ÅÍ∏à"
              @click="handleBenefitClick('savingForSoldier')"
            />
            <q-tab
              name="Ï£ºÌÉùÏ≤≠ÏïΩ"
              label="Ï£ºÌÉùÏ≤≠ÏïΩ"
              @click="handleBenefitClick('housingSubscription')"
            />
            <q-tab
              name="ÏûêÏú†Ï†ÅÍ∏à"
              label="ÏûêÏú†Ï†ÅÍ∏à"
              @click="handleBenefitClick('savingFree')"
            />
            <q-tab
              name="Ï†ïÍ∏∞Ï†ÅÍ∏à"
              label="Ï†ïÍ∏∞Ï†ÅÍ∏à"
              @click="handleBenefitClick('savingFixed')"
            />
            <q-tab
              name="Ï≤≠ÎÖÑÎèÑÏïΩÍ≥ÑÏ¢å"
              label="Ï≤≠ÎÖÑÎèÑÏïΩÍ≥ÑÏ¢å"
              @click="handleBenefitClick('savingForJumpingYouth')"
            />
          </q-tabs>
        </article>
      </section>
      <section class="page-section">
        <div class="search-filter-wrap">
          <!-- <p>ÏÑ†ÌÉù Í≤ÄÏÉâ Ï°∞Í±¥</p> -->
          <ul class="search-filter-item-wrap">
            <li class="search-filter-item" v-if="bankCompanyName">
              <p>{{ bankCompanyName }}</p>
              <span @click="removeFilter('bankCompanyName')">
                <i class="fa-solid fa-xmark"></i>
              </span>
            </li>
            <li class="search-filter-item" v-if="Selectperiod">
              <p>{{ Selectperiod }}</p>
              <span @click="removeFilter('period')">
                <i class="fa-solid fa-xmark"></i>
              </span>
            </li>
            <li
              class="search-filter-item"
              v-for="(benefit, index) in deposit_options"
              :key="index"
            >
              <p>{{ benefit }}</p>
              <span @click="removeFilter('deposit_options', index)">
                <i class="fa-solid fa-xmark"></i>
              </span>
            </li>
          </ul>
          <div class="search-filter-icon" @click="resetFilters">
            <i class="fa-solid fa-arrows-rotate"></i>
          </div>
        </div>
      </section>
      <section class="sort-button">
        <div class="filter_button">{{ totalData }}Í∞ú</div>

        <select class="sort-select" @change="changeSortOrder">
          <option value="max">ÏµúÍ≥†Í∏àÎ¶¨Ïàú</option>
          <option value="basic">Í∏∞Î≥∏Í∏àÎ¶¨Ïàú</option>
        </select>
      </section>

      <section class="page-section new">
        <div
          class="bank-type"
          v-for="(li, idx) in product.Deposits"
          :key="idx"
          @click="goDepositDetail(li.code)"
        >
          <div class="b-left">
            <div class="bank-img">
              <div>
                <img
                  :src="li.companylogourl"
                  width="42"
                  height="42"
                  loading="eager"
                />
              </div>
            </div>
            <div class="bank-name">
              <span class="bank-name1">{{ li.name }}</span>
              <span class="bank-name2">{{ li.companyName }}</span>
              <ul class="bank-condition">
                <li
                  class="bank-condi c1"
                  v-for="(item, idx) in li.productCategories"
                  :key="idx"
                >
                  {{ item }}
                </li>
                <!-- <li class="bank-condi c2">Î∞©Î¨∏ÏóÜÏù¥Í∞ÄÏûÖ</li>
                <li class="bank-condi c3">ÏûêÏú†Ï†ÅÍ∏à</li> -->
              </ul>
            </div>
          </div>
          <div class="b-right">
            <div class="price-best">
              ÏµúÍ≥†<span class="best-price">{{ li.primeInterestRate }}%</span>
            </div>
            <div class="price-norm">
              Í∏∞Î≥∏<span class="norm-price">{{ li.interestRate }}%</span>
            </div>
          </div>
        </div>
      </section>
      <!--
      <section
        class="page-section"
        v-for="(li, idx) in product.Deposits"
        :key="idx"
        @click="goDepositDetail(li.code)"
      >
        <div>
          <div class="card-section">
            <div class="card-img-box">
              <div class="card-img-wrap">
                <img
                  :src="li.companylogourl"
                  class="card-img"
                  alt="Ïπ¥Îìú Ïù¥ÎØ∏ÏßÄ"
                />
              </div>
            </div>
            <div class="card-text">
              <ul class="card-list">
                <li class="card-name">{{ li.name }}</li>
                <li>
                  <div class="card-description">{{ li.titleDescription }}</div>
                </li>
                <li class="card-fee-benefit">
                  <div>
                    {{ li.companyName }}
                  </div>
                </li>
                <li>
                  <div class="card-annualfee">
                    <div
                      class="bank-options"
                      v-for="(item, idx) in li.productCategories"
                      :key="idx"
                    >
                      <span class="category-item">{{ item }}</span>
                    </div>
                  </div>
                </li>
                <li class="card-benefits">
                  <div v-for="(benefit, idx) in li.benefits" :key="idx">
                    <span class="benefits-item" v-if="idx < 2">
                      <span>üíé</span>
                      {{ benefit.rootBenefitCategoryIdName }}
                    </span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="card-percent">
              <div>
                <span>ÏµúÎåÄ</span>
                <p>{{ li.primeInterestRate }} %</p>
              </div>
              <div>
                <span>Í∏∞Î≥∏</span>
                <p>{{ li.interestRate }} %</p>
              </div>
            </div>
          </div>
        </div>
      </section> -->

      <article>
        <button
          class="addData"
          @click="loadMoreCards"
          v-if="product.Deposits.length < totalData"
        >
          <span>ÎçîÎ≥¥Í∏∞ {{ product.Deposits.length }} / {{ totalData }}</span>
        </button>
      </article>
    </q-page>
    <div class="common-container info-wrap">
      <p class="info-title">
        <i class="fa-solid fa-circle-info"></i> ÏïàÎÇ¥ ÏÇ¨Ìï≠
      </p>
      <p>
        Ìï¥Îãπ ÏÇ¨Ïù¥Ìä∏Îäî Ìè¨Ìä∏Ìè¥Î¶¨Ïò§Ïö© ÏÇ¨Ïù¥Ìä∏Î°ú Ïã§Ï†ú ÏÑúÎπÑÏä§Í∞Ä ÎêòÏßÄ ÏïäÏúºÎ©∞, Ï†úÍ≥µÎêòÎäî
        Ï†ïÎ≥¥Îäî Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏùÑ Ïàò ÏûàÏùåÏùÑ ÏïåÎ¶ΩÎãàÎã§.
      </p>
    </div>
  </q-layout>
</template>

<script setup>
import { defineComponent, onBeforeMount, onMounted, ref, reactive } from "vue";
import { useRouter, useRoute } from "vue-router";
import { useQuasar } from "quasar";
import { api } from "boot/axios";
import axios from "axios";

defineOptions({
  name: "DepositList",
});

// Í∏∞Î≥∏ ÏÑ∏ÌåÖ
const $router = useRouter();
const $q = useQuasar();

const bankCompanyName = ref("");
const productCategories = reactive([]);
const selectAmount = ref("");

// Ï¥àÍ∏∞ ÏÑ§Ï†ï
onMounted(() => {
  DepositList();
});

// Í≤ÄÏÉâ Ï°∞Í±¥
const searchForm = ref({
  limit: "10",
  page: "1",
  bank_name: "",
  period: "",
  categories: "",
  basic_rate_sort: "",
  max_rate_sort: "desc",
});

const totalData = ref(0);
const product = ref({ Deposits: [] });

const DepositList = async () => {
  const url = `${
    process.env.API
  }/v1/bank/deposit/list?limit=${encodeURIComponent(
    searchForm.value.limit
  )}&page=${encodeURIComponent(
    searchForm.value.page
  )}&bank_name=${encodeURIComponent(
    searchForm.value.bank_name
  )}&period=${encodeURIComponent(
    searchForm.value.period
  )}&categories=${encodeURIComponent(
    searchForm.value.categories
  )}&basic_rate_sort=${encodeURIComponent(
    searchForm.value.basic_rate_sort
  )}&max_rate_sort=${encodeURIComponent(searchForm.value.max_rate_sort)}`;
  await api
    .get(url)
    .then((res) => {
      const transformCategory = (category) => {
        const categoryMap = {
          specialOffer: "ÌäπÌåê",
          online: "Î∞©Î¨∏ÏóÜÏù¥Í∞ÄÏûÖ",
          savingFixed: "Ï†ïÍ∏∞Ï†ÅÍ∏à",
          savingFree: "ÏûêÏú†Ï†ÅÍ∏à",
          savingForYouth: "Ï≤≠ÎÖÑÏ†ÅÍ∏à",
          savingForJumpingYouth: "Ï≤≠ÎÖÑÎèÑÏïΩÍ≥ÑÏ¢å",
          savingForSoldier: "Íµ∞Ïù∏Ï†ÅÍ∏à",
          housingSubscription: "Ï£ºÌÉùÏ≤≠ÏïΩ",
        };
        return categoryMap[category] || category;
      };

      const formatInterestRate = (rate) => {
        return parseFloat(rate).toFixed(2);
      };

      const deposits = res.data.Deposits.map((deposit) => {
        return {
          ...deposit,
          primeInterestRate: formatInterestRate(deposit.primeInterestRate),
          interestRate: formatInterestRate(deposit.interestRate),
          productCategories: deposit.productCategories.map(transformCategory),
        };
      });

      if (searchForm.value.page === "1") {
        product.value.Deposits = deposits;
      } else {
        product.value.Deposits = product.value.Deposits.concat(deposits);
      }
      totalData.value = res.data.total;
    })
    .catch((err) => {
      console.log(err);
    });
};
const loadMoreCards = () => {
  searchForm.value.page = (parseInt(searchForm.value.page) + 1).toString();
  DepositList();
};

const Selectperiod = ref("");

const select_period = (month) => {
  if (month === "6Í∞úÏõî") {
    Selectperiod.value = "6Í∞úÏõî";
    console.log("6Í∞úÏõî");
    document.querySelector(".bar_cir").style.transform = "translate(185px, 0)";
  } else if (month === "12Í∞úÏõî") {
    Selectperiod.value = "12Í∞úÏõî";
    console.log("12Í∞úÏõî");
    document.querySelector(".bar_cir").style.transform = "translate(360px, 0)";
  } else if (month === "24Í∞úÏõî Ïù¥ÏÉÅ") {
    Selectperiod.value = "24Í∞úÏõî Ïù¥ÏÉÅ";
    console.log("24Í∞úÏõî Ïù¥ÏÉÅ");
    document.querySelector(".bar_cir").style.transform = "translate(537px, 0)";
  } else {
    Selectperiod.value = "Ï†ÑÏ≤¥";
    console.log("Ï†ÑÏ≤¥");
    document.querySelector(".bar_cir").style.transform = "translate(0, 0)";
  }

  // Î™®Îì† ÎßâÎåÄ ÏÉâÏÉÅÏùÑ Ï¥àÍ∏∞ÌôîÌï©ÎãàÎã§.
  document.querySelector(".bar_1").style.backgroundColor = "#e8ebef";
  document.querySelector(".bar_2").style.backgroundColor = "#e8ebef";
  document.querySelector(".bar_3").style.backgroundColor = "#e8ebef";

  // ÌÅ¥Î¶≠Îêú ÎßâÎåÄÏùò ÏÉâÏÉÅÏùÑ Î≥ÄÍ≤ΩÌï©ÎãàÎã§.
  if (month === "6Í∞úÏõî") {
    document.querySelector(".bar_1").style.backgroundColor = "#054cc9";
    changeSearchForm("period", "6");
  } else if (month === "12Í∞úÏõî") {
    document.querySelector(".bar_1").style.backgroundColor = "#054cc9";
    document.querySelector(".bar_2").style.backgroundColor = "#054cc9";
    changeSearchForm("period", "12");
  } else if (month === "24Í∞úÏõî Ïù¥ÏÉÅ") {
    document.querySelector(".bar_1").style.backgroundColor = "#054cc9";
    document.querySelector(".bar_2").style.backgroundColor = "#054cc9";
    document.querySelector(".bar_3").style.backgroundColor = "#054cc9";
    changeSearchForm("period", "Ï†ÑÏ≤¥");
  } else {
    document.querySelector(".bar_1").style.backgroundColor = "#e8ebef";
    changeSearchForm("period", "Ï†ÑÏ≤¥");
  }
};

const sortOrder = ref("asc");

const changeSortOrder = (event) => {
  sortOrder.value = event.target.value;
  updateSortParams();
  DepositList();
};

const updateSortParams = () => {
  if (sortOrder.value === "basic") {
    searchForm.value.basic_rate_sort = "desc";
    searchForm.value.max_rate_sort = "";
  } else if (sortOrder.value === "max") {
    searchForm.value.basic_rate_sort = "";
    searchForm.value.max_rate_sort = "desc";
  }
};

const selectBank = (name) => {
  product.value.Deposits = [];
  bankCompanyName.value = name;
  changeSearchForm("bank_name", name);
};

const deposit_options = reactive([]);

const handleBenefitClick = (categories) => {
  product.value.Deposits = [];
  if (categories === "online") {
    categories = "Î∞©Î¨∏ÏóÜÏù¥Í∞ÄÏûÖ";
  } else if (categories === "specialOffer") {
    categories = "ÌäπÌåê";
  } else if (categories === "savingFixed") {
    categories = "Ï†ïÍ∏∞Ï†ÅÍ∏à";
  } else if (categories === "savingFree") {
    categories = "ÏûêÏú†Ï†ÅÍ∏à";
  } else if (categories === "savingForYouth") {
    categories = "Ï≤≠ÎÖÑÏ†ÅÍ∏à";
  } else if (categories === "savingForJumpingYouth") {
    categories = "Ï≤≠ÎÖÑÎèÑÏïΩÍ≥ÑÏ¢å";
  } else if (categories === "savingForSoldier") {
    categories = "Íµ∞Ïù∏Ï†ÅÍ∏à";
  } else if (categories === "housingSubscription") {
    categories = "Ï£ºÌÉùÏ≤≠ÏïΩ";
  }
  toggleBenefit(categories);
  changeSearchForm("categories", deposit_options.join(","));
};

const toggleBenefit = (category) => {
  const index = deposit_options.indexOf(category);
  if (index === -1) {
    deposit_options.push(category);
  } else {
    deposit_options.splice(index, 1);
  }
};

const changeSearchForm = (key, value) => {
  searchForm.value[key] = value;
  DepositList();
};

const goDepositDetail = (detailId) => {
  console.log("detailId", detailId);
  $router.push({
    path: `/deposit/DepositDetail/${detailId}`,
  });
};

const resetFilters = () => {
  product.value.Deposits = [];
  bankCompanyName.value = "";
  deposit_options.splice(0, deposit_options.length);
  searchForm.value.bank_name = "";
  searchForm.value.categories = "";
  searchForm.value.period = "";
  searchForm.value.basic_rate_sort = "";
  searchForm.value.max_rate_sort = "desc";
  DepositList();
};

const removeFilter = (type, index = null) => {
  if (type === "bankCompanyName") {
    bankCompanyName.value = "";
    changeSearchForm("bank_name", "");
  } else if (type === "deposit_options" && index !== null) {
    if (deposit_options) {
      deposit_options.splice(index, 1);
      changeSearchForm("categories", deposit_options.join(","));
    }
  } else if (type === "period") {
    Selectperiod.value = "";
    changeSearchForm("period", "");
  }
};
</script>

<style lang="scss" scoped>
.card-article {
  position: relative;
  display: flex;
  align-items: center;
  padding-bottom: 6px;
}
.card-article::after {
  content: "";
  border: 1px solid #f3f5f7;
  width: calc(100%);
  position: absolute;
  bottom: 4px;
}
.article-title {
  min-width: 80px;
  text-align: center;
  font-weight: 900;
}
.tab-list {
  width: calc(100% - 80px);
}
.footer {
  max-width: 68;
}
.info-title {
  font-weight: 900;
  color: #121212;
}
.info-wrap {
  color: #767676;
  padding-bottom: 30px;
  p {
    padding: 8px 0;
  }
}

.card-section {
  // border: 1px solid;
  display: flex;
  align-items: flex-start;
  padding: 30px;

  gap: 20px;
  cursor: pointer;
  // gap: 20px;
  .card-img-box {
    // border: 1px solid;
    padding: 30px;
  }
  .card-img-wrap {
    width: 70%;
    img {
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
      z-index: 1;
    }
  }
  .card-text {
    padding: 30px 0;
  }
}

// .card-company-logo {
//     width: 30px;
//     height: 50px;
//     display: flex;
//     justify-content: center;
//     align-items: center;
//     img {
//       width: 100%;
//     }
//   }

.search-filter-wrap {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.search-filter-item-wrap {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  // padding-top: 10px;
}
.search-filter-item {
  display: flex;
  gap: 8px;
  justify-content: space-between;
  color: #ffffff;
  background-color: var(--main-color);
  border-radius: 4px;
  padding: 4px 10px;
  text-align: center;
  cursor: pointer;
}
.search-filter-icon {
  border: 1px solid #e5e8ed;
  color: #767676;
  padding: 6px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  cursor: pointer;
}

.card-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.card-name {
  font-weight: 900;
  font-size: 18px;
}
.card-fee-benefit {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}
.card-description {
  color: vaR(--main-color);
  font-weight: 900;
  font-size: 16px;
}
.card-annualfee {
  display: flex;
  gap: 4px;
  // background-color: rgba(100,109,122,0.1);
  border-radius: 5px;
  align-items: center;
  justify-content: center;
  padding: 0 10px;
}
.category-item {
  display: flex;
  gap: 4px;
  background-color: rgba(100, 109, 122, 0.1);
  border-radius: 5px;
  align-items: center;
  justify-content: center;
  padding: 0 10px;
}
.card-benefits {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}
.benefits-item {
  font-size: 15px;
}
.benefits-item {
  padding: 0 4px;
}
.addData {
  background-color: #ffffff;
  padding: 24px;
  margin: 10px auto;
  border-radius: 16px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
  border: none;
  display: block;
  width: 100%;
}

.card-percent {
  width: 25%;
}

.card-percent div {
  display: flex;
  gap: 3px;
  color: #afafaf;
  font-weight: bold;
}

.card-percent div:nth-child(1) {
  display: flex;
  gap: 4px;
  justify-content: center;
  align-items: center;
  color: #054cc9;
}

.card-percent div:nth-child(1) p {
  font-size: 25px;
  font-weight: bold;
}

.sort-button {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.sort-select {
  border: 1px solid;
  padding: 8px 16px;
  border-radius: 8px;
  border: 1px solid #f6f8fa;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
  margin: 8px;
}

.addData {
  cursor: pointer;
}

.filter_button {
  border: 1px solid;
  padding: 8px 16px;
  border-radius: 8px;
  border: 1px solid #f6f8fa;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
  margin: 8px;
  background-color: #ffffff;
}

.card-company-name {
  margin-top: 5px;
  text-align: center;
}
.card-company-logo {
  width: 100%;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
}

.tab-item {
  border: 1px solid #dcdee0;
  border-radius: 8px;
  margin-left: 10px;
  width: 80px;
  height: 80px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.card-percent {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.bar_1 {
  background-color: #e8ebef;
  width: 200px;
  height: 15px;
  border-radius: 20px 0px 0px 20px;
}

.bar_2 {
  background-color: #e8ebef;
  width: 200px;
  height: 15px;
}

.bar_3 {
  background-color: #e8ebef;
  width: 200px;
  height: 15px;
  border-radius: 0px 20px 20px 0px;
}

.bar_itself {
  display: flex;
  gap: 1.7px;
  align-items: center;
  position: relative;
  width: 100%;
}

.txt_area {
  display: flex;
  margin-top: 15px;
  font-size: 15px;
  color: gray;
  cursor: pointer;
}

.bar_cir {
  width: 24px;
  height: 22px;
  background-color: white;
  border: 5px solid #054cc9;
  border-radius: 50px;
}

#whole {
  color: #054cc9;
  font-weight: bold;
  position: absolute;
  transform: translate(109px, 44px);
  top: 0;
  left: 0;
  cursor: pointer;
}

.card-percent div p:nth-child(1) {
  font-size: 18px;
  color: #3fae06;
}

div#month_6 {
  position: absolute;
  transform: translate(263px, 44px);
  top: 0;
  left: 0;
  cursor: pointer;
}
div#month_12 {
  position: absolute;
  transform: translate(436px, 44px);
  top: 0;
  left: 0;
  cursor: pointer;
}

div#month_24 {
  position: absolute;
  transform: translate(558px, 44px);
  top: 0;
  left: 0;
  cursor: pointer;
}

.bar_wrapper {
  width: 87%;
  height: 62px;
  margin-top: 16px;
}

.bar_1,
.bar_2,
.bar_3 {
  transition: background-color 0.3s ease;
  cursor: pointer;
}
.bank-options {
  widows: 100%;
}

.bank-type {
  border-top: 1px solid #eaeaea;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  padding: 20px 30px 20px 0;
  cursor: pointer;
}

.b-left {
  display: flex;
  flex-direction: row;
}

.bank-name {
  display: flex;
  flex-direction: column;
  padding-left: 10px;
}

.bank-condition {
  display: flex;
  flex-direction: row;
}

.bank-name1 {
  font-size: 18x;
  line-height: 23px;
  letter-spacing: -0.3px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  display: block;
  color: #1e1e23;
  font-weight: bold;
}

.price-best {
  font-size: 14px;
  line-height: 20px;
  letter-spacing: -0.3px;
  color: #09aa5c;
  display: flex;
  gap: 3px;
}

.price-norm {
  font-size: 13px;
  line-height: 19px;
  letter-spacing: -0.3px;
  display: block;
  margin-top: 3px;
  color: #929294;
  text-align: right;
}

.best-price {
  font-size: 19px;
  font-weight: bolder;
}

.bank-condi.c1 {
  background-color: #e5f3fe;
  color: #058bd7;
}

.bank-condi.c2 {
  background-color: #f6f8fa;
}

.bank-condi.c3 {
  background-color: #f6f8fa;
}

.bank-condi {
  display: inline-block;
  margin: 4px 5px 0 0;
  padding: 1px 4px;
  border-radius: 4px;
  line-height: 18px;
  vertical-align: top;
  color: #767678;
  gap: 7px;
}
.page-event {
  font-weight: 800;
  font-size: 19px;
  line-height: 32px;
}
</style>
